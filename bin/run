#!/usr/bin/env python

import importlib.util as importlib
import os
import sys
import uuid

from sys import argv

from euler.definitions import DESK_DIR, DRAWER_DIR, SOLVED_DIR
from euler.problem import Script, Problem


assert __name__ == '__main__'

if len(argv) < 2: sys.exit('please specify a problem number')
if not argv[1].isdigit(): sys.exit('the problem number needs to be numeric')

problem_number = int(argv[1])
filename = '{}.py'.format(problem_number)

try:
    script = Script(filename)
    module = script.create_module()
    problem = Problem(module)
except Exception as e:
    sys.exit(e)

# register the module so that it can be imported if necessary.
# e.g. the pickle library can't dump classes that it cannot import.
sys.modules[module.__name__] = module

result = problem.solve()

print(result)
